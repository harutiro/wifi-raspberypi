b'#!/usr/bin/gnuplot\n#\n# The calibration matrix (affine transformation with offset to origin):\n#\n# [[ 1.69514555e+00 -1.85600376e-01 -1.58112407e+03]\n#  [-1.85600376e-01  1.04955437e+00  6.80425176e+03]\n#  [ 0.00000000e+00  0.00000000e+00  1.00000000e+00]]\n#\n# The same matrix, as a Python array:\n#\n# sensor.calibration = [[1.6951455520575365, -0.1856003759091452, -1581.1240663118692], [-0.18560037590914513, 1.0495543694923402, 6804.2517632727595], [0.0, 0.0, 1.0]]\n#\n# Invalid semi axes detected: using fit_ellipse() without np.abs().\n#\ninput_data = "magnet-data_20230218_1723.txt"\nset output "magnet-data_20230218_1723.png"\ncircle_size = 18340 * 0.02\nraw_data_color = "#28e828"\nellipse_color = "#38a838"\naffine_offset_color = "#d0d0d0"\naffine_centered_color = "#c020c0"\nset term png size 1200, 1200 font "Helvetica,18"\nset style line 100 lc rgb raw_data_color lw 1\nset style line 300 lc rgb ellipse_color lw 3\nset style line 400 lc rgb affine_offset_color lw 3\nset style line 500 lc rgb affine_centered_color lw 3\nset style fill  transparent solid 0.50\nset title "QMC5883L Magnetic Sensor X-Y Plane Calibration"\nset size ratio 1\nset xzeroaxis\nset yzeroaxis\nset xrange [-18340:18340]\nset yrange [-18340:18340]\nset label 40 center at graph 0.5,char 1.5 \\\n    "Ellipse center (x, y) = (227, -6442), Semi-axis (a, b) = (2743, 4786), Rotation = -14.9\xc2\xb0"\nset bmargin 5\nset object 20 ellipse center 227.32,-6442.79 size 5486.74,9572.71 angle -14.95 \\\n    front fillstyle empty border lc rgb ellipse_color lw 3\nset object 10 circle center 227.32,-6442.79 size 4786.36 \\\n    front fillstyle empty border lc rgb affine_offset_color lw 3\nset object 30 circle center 0,0 size 4786.36 \\\n    front fillstyle empty border lc rgb affine_centered_color lw 3\nplot input_data using 1:2:(circle_size) with circles linestyle 100 \\\n        title "Raw Data", \\\n    "<echo \'227.32 -6442.79 2877.84 -7150.47\\n227.32 -6442.79 1462.00 -1818.43\'" \\\n        using 1:2:($3-$1):($4-$2) with vectors nohead linestyle 300 \\\n        title "Best Fit Ellipse", \\\n    "<echo \'227.32 -6442.79 2784.14 -3117.56\\n227.32 -6442.79 3944.33 -3427.33\'" \\\n        using 1:2:($3-$1):($4-$2) with vectors nohead linestyle 400 \\\n        title "Affine Transformation from Ellipse to Circle", \\\n    "<echo \'2784.14 -3117.56\\n3944.33 -3427.33\'" \\\n        using 1:2:(circle_size) with circles linestyle 400 \\\n        title "Transformation: Example Point", \\\n    "<echo \'0 0 3717.01 3015.46\'" \\\n        using 1:2:($3-$1):($4-$2) with vectors nohead linestyle 500 \\\n        title "Transformation Circle: Offset to Origin", \\\n    "<echo \'3717.01 3015.46\'" \\\n        using 1:2:(circle_size) with circles linestyle 500 \\\n        title "Example Point: Offset to Origin"\n'
